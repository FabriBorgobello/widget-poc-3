(function(){"use strict";function m(e){let t;return()=>(t===void 0&&(t=e()),t)}const W=m(()=>window.ScrollTimeline!==void 0);class P{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}then(t,n){return Promise.all(this.animations).then(t).catch(n)}getAll(t){return this.animations[0][t]}setAll(t,n){for(let i=0;i<this.animations.length;i++)this.animations[i][t]=n}attachTimeline(t,n){const i=this.animations.map(o=>W()&&o.attachTimeline?o.attachTimeline(t):n(o));return()=>{i.forEach((o,a)=>{o&&o(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}const x=e=>e;var F={};let f=x;F.NODE_ENV!=="production"&&(f=(e,t)=>{if(!e)throw new Error(t)});function B(e,t,n){if(typeof e=="string"){let i=document;t&&(f(!!t.current,"Scope provided, but no element detected."),i=t.current),e=i.querySelectorAll(e)}else e instanceof Element&&(e=[e]);return Array.from(e||[])}const y=e=>e*1e3,b=e=>e/1e3;function k(e,t){return e?e[t]||e.default||e:void 0}const M=e=>Array.isArray(e)&&typeof e[0]=="number",L=(e,t,n)=>{const i=t-e;return i===0?1:(n-e)/i},_=10,$=(e,t)=>{let n="";const i=Math.max(Math.round(t/_),2);for(let o=0;o<i;o++)n+=e(L(0,i-1,o))+", ";return`linear(${n.substring(0,n.length-2)})`},z={linearEasing:void 0};function V(e,t){const n=m(e);return()=>{var i;return(i=z[t])!==null&&i!==void 0?i:n()}}const T=V(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),h=([e,t,n,i])=>`cubic-bezier(${e}, ${t}, ${n}, ${i})`,w={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:h([0,.65,.55,1]),circOut:h([.55,0,1,.45]),backIn:h([.31,.01,.66,-.59]),backOut:h([.33,1.53,.69,.99])};function E(e,t){if(e)return typeof e=="function"&&T()?$(e,t):M(e)?h(e):Array.isArray(e)?e.map(n=>E(n,t)||w.easeOut):w[e]}function D(e,t,n,{delay:i=0,duration:o=300,repeat:a=0,repeatType:d="loop",ease:l="easeInOut",times:u}={}){const r={[t]:n};u&&(r.offset=u);const c=E(l,o);return Array.isArray(c)&&(r.easing=c),e.animate(r,{delay:i,duration:o,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:a+1,direction:d==="reverse"?"alternate":"normal"})}const A=2e4;function G(e){let t=0;const n=50;let i=e.next(t);for(;!i.done&&t<A;)t+=n,i=e.next(t);return t>=A?1/0:t}function U(e,t=100,n){const i=n({...e,keyframes:[0,t]}),o=Math.min(G(i),A);return{type:"keyframes",ease:a=>i.next(o*a).value/t,duration:b(o)}}const s=(e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}))("px"),S={borderWidth:s,borderTopWidth:s,borderRightWidth:s,borderBottomWidth:s,borderLeftWidth:s,borderRadius:s,radius:s,borderTopLeftRadius:s,borderTopRightRadius:s,borderBottomRightRadius:s,borderBottomLeftRadius:s,width:s,maxWidth:s,height:s,maxHeight:s,top:s,right:s,bottom:s,left:s,padding:s,paddingTop:s,paddingRight:s,paddingBottom:s,paddingLeft:s,margin:s,marginTop:s,marginRight:s,marginBottom:s,marginLeft:s,backgroundPositionX:s,backgroundPositionY:s};function N(e){return typeof e=="function"}function v(e,t){e.timeline=t,e.onfinish=null}const j=e=>e!==null;function q(e,{repeat:t,repeatType:n="loop"},i){const o=e.filter(j),a=t&&n!=="loop"&&t%2===1?0:o.length-1;return!a||i===void 0?o[a]:i}function H(e,t,n){e.style.setProperty(`--${t}`,n)}function X(e,t,n){e.style[t]=n}const Y=m(()=>{try{document.createElement("div").animate({opacity:[1]})}catch{return!1}return!0}),J=m(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),g=new WeakMap;function K(e,t,n){for(let i=0;i<t.length;i++)t[i]===null&&(t[i]=i===0?n():t[i-1]),typeof t[i]=="number"&&S[e]&&(t[i]=S[e].transform(t[i]));!Y()&&t.length<2&&t.unshift(n())}const I="easeOut";function C(e){const t=g.get(e)||new Map;return g.set(e,t),g.get(e)}class Q{constructor(t,n,i,o){const a=n.startsWith("--");this.setValue=a?H:X,this.options=o,this.updateFinishedPromise(),f(typeof o.type!="string",`animateMini doesn't support "type" as a string. Did you mean to import { spring } from "framer-motion"?`);const d=C(t).get(n);d&&d.stop();const l=()=>n.startsWith("--")?t.style.getPropertyValue(n):window.getComputedStyle(t)[n];if(Array.isArray(i)||(i=[i]),K(n,i,l),N(o.type)){const r=U(o,100,o.type);o.ease=T()?r.ease:I,o.duration=y(r.duration),o.type="keyframes"}else o.ease=o.ease||I;this.removeAnimation=()=>{var r;return(r=g.get(t))===null||r===void 0?void 0:r.delete(n)};const u=()=>{this.setValue(t,n,q(i,this.options)),this.cancel(),this.resolveFinishedPromise()};J()?(this.animation=D(t,n,i,o),o.autoplay===!1&&this.animation.pause(),this.animation.onfinish=u,this.pendingTimeline&&v(this.animation,this.pendingTimeline),C(t).set(n,this)):u()}get duration(){return b(this.options.duration||300)}get time(){var t;return this.animation?b(((t=this.animation)===null||t===void 0?void 0:t.currentTime)||0):0}set time(t){this.animation&&(this.animation.currentTime=y(t))}get speed(){return this.animation?this.animation.playbackRate:1}set speed(t){this.animation&&(this.animation.playbackRate=t)}get state(){return this.animation?this.animation.playState:"finished"}get startTime(){return this.animation?this.animation.startTime:null}flatten(){var t;this.animation&&((t=this.animation.effect)===null||t===void 0||t.updateTiming({easing:"linear"}))}play(){this.state==="finished"&&this.updateFinishedPromise(),this.animation&&this.animation.play()}pause(){this.animation&&this.animation.pause()}stop(){!this.animation||this.state==="idle"||this.state==="finished"||(this.animation.commitStyles&&this.animation.commitStyles(),this.cancel())}complete(){this.animation&&this.animation.finish()}cancel(){this.removeAnimation();try{this.animation&&this.animation.cancel()}catch{}}then(t,n){return this.currentFinishedPromise.then(t,n)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}attachTimeline(t){return this.animation?v(this.animation,t):this.pendingTimeline=t,x}}function Z(e,t,n,i){const o=B(e,i),a=o.length;f(!!a,"No valid element provided.");const d=[];for(let l=0;l<a;l++){const u=o[l],r={...n};typeof r.delay=="function"&&(r.delay=r.delay(l,a));for(const c in t){const ct=t[c],p={...k(r,c)};p.duration=p.duration?y(p.duration):p.duration,p.delay=y(p.delay||0),d.push(new Q(u,c,ct,p))}}return d}const O=(e=>{function t(n,i,o){return new P(Z(n,i,o,e))}return t})(),tt="fully-ai-widget-root",et="fully-ai-main-button",R="fully-ai-main-container",nt="fully-ai-iframe";function it(){const e=document.createElement("div");e.id=R,e.style.width="300px",e.style.height="300px",e.style.backgroundColor="#ffffff",e.style.border="1px solid #ccc",e.style.position="fixed",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.display="none",e.style.zIndex="1000",e.style.opacity="0",e.style.overflow="hidden";const t=document.createElement("button");return t.textContent="Close",t.style.position="absolute",t.style.top="10px",t.style.right="10px",t.style.padding="5px 10px",t.style.cursor="pointer",t.style.zIndex="1001",t.addEventListener("click",()=>{O(e,{opacity:0},{onComplete:()=>{console.log("Animation completed"),e.remove()}})}),e.appendChild(t),e}function ot(e){const{companyId:t,assistantId:n}=e,i=`https://fully-frontend-git-dev-fully.vercel.app/company/${t}/assistant/${n}/chat`,o=document.createElement("iframe");return o.id=nt,o.src=i,o.style.width="100%",o.style.height="100%",o.style.border="none",o}const st=e=>{let t=document.getElementById(R);t||(t=it(),document.body.appendChild(t));const n=ot(e);t.appendChild(n),t.style.display="block",O(t,{opacity:1})};function rt(){const e=document.createElement("button");return e.id=et,e.textContent="Open Square",e.style.padding="10px 20px",e.style.fontSize="16px",e.style.cursor="pointer",e.style.margin="20px auto",e.style.display="block",e}function at(e){const{position:t}=e,n=document.createElement("div");switch(n.id=tt,n.style.position="fixed",n.style.zIndex="9999",n.style.backgroundColor="white",n.style.border="1px solid #ccc",n.style.borderRadius="10px",n.style.boxShadow="0 0 10px rgba(0, 0, 0, 0.1)",n.style.padding="20px",n.style.display="none",n.style.width="300px",n.style.height="400px",n.style.overflow="hidden",t){case"bottom-left":n.style.bottom="20px",n.style.left="20px";break;case"bottom-right":default:n.style.bottom="20px",n.style.right="20px";break}return n}function lt(e){console.log("Initializing widget with settings:",e);const t=at(e);document.body.appendChild(t);const n=rt();n.addEventListener("click",()=>st(e)),t.appendChild(n)}typeof window<"u"&&(console.log("Setting FullyAIWidget on window object"),window.FullyAIWidget={init:lt})})();
